<html>
<head>
  <title>Protein Structure</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
<div id=viewer></div>
</body>
<script type='text/javascript' src='pv/bio-pv.min.js'></script>
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
    
<script type='text/javascript'>
    
// override the default options with something less restrictive.
var options = {
  width: 1000,
  height: 1000,
  antialias: true,
  quality : 'high'
};
    
function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}
var param = getQueryVariable("name");
    
var json;
var code = [];
var j = 0;
$.getJSON('receptor_protein_translator.json').done(function (data) {
    json = data;
    for(var i = 0; i < json.length; i++) {
        var obj = json[i];
        if(obj.protein.includes(param)) {
            code[j] = obj;  
            j = j + 1;
            console.log(code);
        }
    }
    $("div").append("<ul></ul>");
    for(var i in code) {
        var li = "<li>";
        $("ul").append(li.concat(code[i].pdb_code)).append(li.concat(code[i].species)).append(li.concat(code[i].protein));
        $(".sub").append("<li>".concat(code[i].family));
        $(".sub").append("<li>".concat(code[i].resolution));
        $(".sub").append("<li>".concat(code[i].publication));
        $(".sub").append("<li>".concat(code[i].type));
        $(".sub").append("<li>".concat(code[i].preferred_chain));
        $(".sub").append("<li>".concat(code[i].publication_date));
    }
});
</script>
